var QA=QA||{},insertedNodes,observer;QA.OnScreen=QA.OnScreen||{};QA.OnScreen.ComponentTree=QA.OnScreen.ComponentTree||function(n){var t=null;console.log("initializing");var r=function(){var r,o,u,s;t={components:[]};r=document.querySelectorAll("[data-qa-component-type]");o=0;n.forEach(r,function(n){n.dataset.qaComponentOnScreenId=o++});n.forEach(r,function(n){n.dataset.qaComponentParentOnScreenId=f(n)});u=n.map(r,e);s=n.filter(u,function(n){return n.parentOnScreenId==null});n.forEach(s,function(n){n.childComponents=i(n,u);t.components.push(n)})},u=function(){return n.cloneDeep(t)},f=function(n){for(var t=n;t&&t.parentNode;)if(t=t.parentNode,t.dataset&&t.dataset.qaComponentType)return t.dataset.qaComponentOnScreenId;return-1},e=function(n){return{type:n.dataset.qaComponentType,onScreenId:n.dataset.qaComponentOnScreenId,parentOnScreenId:n.dataset.qaComponentParentOnScreenId==-1?null:n.dataset.qaComponentParentOnScreenId,childComponents:[],properties:o(n)}},o=function(n){var t=n.dataset;return t.qaComponentType=="zone"?{zoneName:t.qaZoneName,isRecursive:t.qaZoneIsRecursive,isGlobal:t.qaZoneIsGlobal}:t.qaComponentType=="widget"?{widgetId:t.qaWidgetId,alias:t.qaWidgetAlias,title:t.qaWidgetTitle}:null},i=function(t,r){var u=n.filter(r,function(n){return n.parentOnScreenId==t.onScreenId});return n.forEach(u,function(n){n.childComponents=i(n,r)}),u};return{buildTree:r,getTree:u}}(_);insertedNodes=[];observer=new MutationObserver(function(n){console.log("fired");n.forEach(function(n){for(var t=0;t<n.addedNodes.length;t++)insertedNodes.push(n.addedNodes[t]);console.log(n)})});observer.observe(document,{childList:!0,subtree:!0});console.log(insertedNodes);